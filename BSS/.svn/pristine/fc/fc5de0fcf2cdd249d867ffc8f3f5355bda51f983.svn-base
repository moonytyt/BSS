<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.training.dao.TrainingDAO">
	
	<!-- 교육 전체조회 화면  -->
	<select id="selectTrainList" resultType="kr.or.ddit.training.vo.TrainingVO">
		SELECT TRAIN_NO
		, LECTOR_ID
		, TRAIN_TYPE
		, TRAIN_PLACE
		, TRAIN_TIME
		, TRAIN_TARGET
		, TRAIN_NAME
		, TRAIN_CONTENT
		, TRAIN_PERIOD
		, TRAIN_SIGN
		 FROM TRAINING
	</select>
	
	<!-- 교육 상세조회 화면  -->
	<select id="selectTrain" resultType="kr.or.ddit.training.vo.TrainingVO" parameterType="int">
	SELECT t.TRAIN_NO , t.LECTOR_ID , l.LECTOR_NAME , t.TRAIN_TYPE ,
	t.TRAIN_PLACE , t.TRAIN_TIME , t.TRAIN_TARGET
	, t.TRAIN_NAME , t.TRAIN_CONTENT , t.TRAIN_PERIOD , t.TRAIN_SIGN ,
	t.CODE FROM TRAINING t left outer JOIN LECTOR l
	on(t.LECTOR_ID = l.lector_id) WHERE TRAIN_no = #{trainNo, jdbcType=NUMERIC}
	</select>
	
	<!-- 강사조회 화면  -->
	<select id="selectLector" resultType="kr.or.ddit.training.vo.LectorVO" >
		SELECT LECTOR_ID
				, LECTOR_NAME
				, LECTOR_RECORD
				, LECTOR_PH
				, LECTOR_MAIL
		FROM LECTOR
        WHERE LECTOR_ID = #{lectorId,jdbcType=VARCHAR}
	</select>
	
	<!-- 교육 등록  -->
	<insert id="insertTraining" parameterType="kr.or.ddit.training.vo.TrainingVO">
		<selectKey order="BEFORE" keyProperty="trainNo" resultType="int">
			SELECT TRAIN_SEQ.NEXTVAL AS trainNo FROM DUAL
		</selectKey>
	INSERT INTO training (
		TRAIN_NO
		,LECTOR_ID
		,TRAIN_TYPE
		,TRAIN_PLACE
		,TRAIN_TIME
		,TRAIN_TARGET
		,TRAIN_NAME
		,TRAIN_CONTENT
		,TRAIN_PERIOD
		,TRAIN_SIGN
		,TRAIN_DATE
	) VALUES (
		#{trainNo,jdbcType=NUMERIC}
		, #{lectorId,jdbcType=VARCHAR}
		, #{trainType,jdbcType=VARCHAR}
		, #{trainPlace,jdbcType=VARCHAR}
		, #{trainTime,jdbcType=NUMERIC}
		, #{trainTarget,jdbcType=VARCHAR}
		, #{trainName,jdbcType=VARCHAR}
		, #{trainContent,jdbcType=CLOB}
		, #{trainPeriod,jdbcType=DATE}
		, #{trainSign,jdbcType=VARCHAR}
		, #{trainDate,jdbcType=DATE}
	)
</insert>
	
	
	<!-- 강사 상세조회  -->
	<select id="selectLectorDetail" resultType="kr.or.ddit.training.vo.LectorVO" parameterType="string">
	SELECT L.LECTOR_ID, L.LECTOR_NAME, L.LECTOR_RECORD, L.LECTOR_PH, L.LECTOR_MAIL
	FROM LECTOR L
	INNER JOIN TRAINING T ON(L.LECTOR_ID = T.LECTOR_ID)
	WHERE L.LECTOR_ID = #{lectorId,jdbcType=VARCHAR}
	</select>
	
</mapper>